// Generated by CoffeeScript 1.6.3
(function() {
  var Beat, beat;

  Beat = (function() {
    function Beat() {
      var interval, logo, offset,
        _this = this;
      logo = $("#logo");
      offset = logo.offset();
      this.paper = Raphael(offset.left + 133, offset.top - 73, 225, 270);
      this.animating = false;
      interval = setInterval(function() {
        if (!_this.animating) {
          return _this.donzDaz();
        }
      }, 12000);
      setTimeout(function() {
        return _this.donzDaz();
      }, 1200);
    }

    Beat.prototype.donzDaz = function() {
      this.times = 4;
      this.animating = true;
      return this.donz();
    };

    Beat.prototype.donz = function() {
      var circle, circle2,
        _this = this;
      circle = this.paper.circle(112, 109, 27);
      circle.attr({
        stroke: 'rgb(70, 169, 201)',
        fill: 'transparent',
        'stroke-width': 7
      });
      circle.animate({
        r: 65,
        stroke: '#CCC',
        opacity: 0
      }, 2800, 'ease-out');
      circle2 = this.paper.circle(101, 177, 27);
      circle2.attr({
        stroke: 'rgb(70, 169, 201)',
        fill: 'transparent',
        'stroke-width': 7
      });
      circle2.animate({
        r: 65,
        stroke: '#CCC',
        opacity: 0
      }, 2800, 'ease-out');
      if (this.times) {
        this.times -= 1;
        return setTimeout(function() {
          return _this.donz();
        }, 300 * this.times);
      } else {
        return this.animating = false;
      }
    };

    return Beat;

  })();

  beat = new Beat;

  $("#members").delegate('.member-meta1', 'webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend', function(e) {
    var parent;
    parent = $(this).parent();
    if (parent.hasClass('animate-step4')) {
      return parent.removeClass('animate-step1 animate-step2 animate-step3 animate-step4');
    } else {
      return parent.addClass('animate-step1');
    }
  });

  $("#members").delegate('.member-meta2', 'webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationend', function(e) {
    var parent;
    parent = $(this).parent();
    if (parent.hasClass('animate-step3')) {
      return parent.addClass('animate-step4');
    } else {
      return parent.addClass('animate-step2');
    }
  });

  $("#members").delegate('li[data-member]', 'mouseenter', function(e) {
    return $(this).data('hover', true);
  });

  $("#members").delegate('li[data-member]', 'mouseleave', function(e) {
    var $this, timeout,
      _this = this;
    $this = $(this);
    $this.data('hover', false);
    timeout = $this.data('timeout');
    if (timeout != null) {
      clearTimeout(timeout);
    }
    return $this.data('timeout', setTimeout(function() {
      if ($this.hasClass('animate-step2') && $this.data('hover') === false) {
        return $this.addClass('animate-step3');
      }
    }, 3000));
  });

}).call(this);
